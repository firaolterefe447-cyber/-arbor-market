{% load static %}
{% load i18n %}
{% load tailwind_tags %}
<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}" dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% trans "Upload Harvest | Arbor" %}</title>

    <!-- LOCAL TAILWIND CSS -->
    {% tailwind_css %}

    <!-- EXTERNAL ASSETS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fafaf9; }
    </style>
</head>
<body class="bg-stone-50 min-h-screen flex flex-col">

    <!-- Navbar (Simple Back Button) -->
    <nav class="bg-green-800 text-white p-4 shadow-lg">
        <div class="container mx-auto flex items-center gap-4">
            <a href="{% url 'dashboard' %}" class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center hover:bg-white hover:text-green-800 transition">
                <i class="fas fa-arrow-left"></i>
            </a>
            <h1 class="text-xl font-bold tracking-wide">{% trans "Upload Harvest" %}</h1>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-lg">

        <div class="bg-white rounded-3xl shadow-xl p-6 border border-stone-100 relative overflow-hidden">
            <!-- Decorative Background blob -->
            <div class="absolute -top-10 -right-10 w-40 h-40 bg-green-50 rounded-full blur-3xl pointer-events-none"></div>

            <form method="post" enctype="multipart/form-data" class="space-y-6 relative z-10">
                {% csrf_token %}

                <!-- 1. IMAGE UPLOAD (The most important part) -->
                <div class="space-y-2">
                    <label class="block text-sm font-black text-stone-700 uppercase tracking-wider">
                        üì∏ {% trans "Take a Photo" %}
                    </label>
                    <div class="p-1 border-2 border-dashed border-green-300 rounded-2xl bg-green-50/50 hover:bg-green-50 transition text-center">
                        {{ form.image }}
                        <p class="text-xs text-green-600 mt-2 font-medium">{% trans "Tap to select image" %}</p>
                    </div>
                </div>

                <!-- 2. NAME (Optional) -->
                <div class="space-y-2">
                    <label class="block text-sm font-black text-stone-700 uppercase tracking-wider">
                        üìù {% trans "Product Name" %} <span class="text-stone-400 text-[10px] font-normal">({% trans "Optional" %})</span>
                    </label>
                    {{ form.name }}
                    <p class="text-[10px] text-stone-400">{% trans "If you don't know the English name, leave it blank. Admin will fix it." %}</p>
                </div>

                <!-- 3. PRICE & STOCK (Side by Side) -->
                <div class="grid grid-cols-2 gap-4">
                    <!-- Price -->
                    <div class="space-y-2">
                        <label class="block text-sm font-black text-stone-700 uppercase tracking-wider">
                            üíµ {% trans "Price (ETB)" %}
                        </label>
                        <div class="relative">
                            {{ form.price_per_kg }}
                            <div class="absolute inset-y-0 right-3 flex items-center pointer-events-none text-stone-400 text-xs font-bold">
                                {% trans "/kg" %}
                            </div>
                        </div>
                    </div>

                    <!-- Stock -->
                    <div class="space-y-2">
                        <label class="block text-sm font-black text-stone-700 uppercase tracking-wider">
                            ‚öñÔ∏è {% trans "Quantity" %}
                        </label>
                        <div class="relative">
                            {{ form.stock_quantity }}
                            <div class="absolute inset-y-0 right-3 flex items-center pointer-events-none text-stone-400 text-xs font-bold">
                                {% trans "kg" %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. LOCATION -->
                <div class="space-y-2">
                    <label class="block text-sm font-black text-stone-700 uppercase tracking-wider">
                        üìç {% trans "Farm Location" %}
                    </label>
                    {{ form.location }}
                </div>

                <!-- 5. SUBMIT BUTTON -->
                <div class="pt-4">
                    <button type="submit" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-green-600/30 transform transition active:scale-95 flex items-center justify-center gap-2 text-lg">
                        <span>{% trans "List on Market" %}</span>
                        <i class="fas fa-check-circle"></i>
                    </button>
                </div>

            </form>
        </div>

    </main>

</body>
</html>